\documentclass{standalone}

\usepackage{tikz,tikz-3dplot,pgfplots,xcolor}
\usetikzlibrary{arrows.meta,calc}

\input{../../Include/formula.tex}

%\pgfplotsset{compat=1.18} 
\definecolor{gray1}{rgb}{0.8,0.8,0.8}
\definecolor{gray2}{rgb}{0.7,0.7,0.7}

\begin{document}
  \begin{tikzpicture}[>=Latex]

  \begin{scope}[scale=0.4,shift={(20,0)}] 
    \draw[rounded corners=15pt,gray2,thick] (-2.2,6.2) coordinate(a) rectangle (17.2,-7.8);

    \draw[thick,->] plot[smooth,tension=0.9,shift={(1.5,-1)}] coordinates {(0,0)(0.5,-1.5)(1.5,-3)};
    \draw[thick,->] plot[smooth,tension=0.9,shift={(11,-4)}] coordinates {(0,0)(1.0,1.5)(1.5,3)};
    \coordinate (fe) at(12.9,-3);
    \coordinate (fp) at(1.1,-3);
    \draw[thick,->] (5,2) -- (9,2) coordinate[pos=0.5] (ff);

    \coordinate (l1) at (2.3,5.3); 
    \coordinate (l2) at (13.3,5.3); 
    \coordinate (l3) at (5,-7);

      \path[fill=gray1] (0,0)--(4,0)--(4,4)--(0,4)--cycle;
      \foreach \x in {0,1,...,4}{
        \draw (\x,0) -- (\x,4);
        \draw (0,\x) -- (4,\x);
      }

      \begin{scope}[shift={(3,-6)}]
        \path[fill=gray1] (0,0)--(4,0)--(4,1)--(5,1)--(5,2)--(6,2)--(6,3)--(7,3)--(7,4)--(3,4)--(3,3)--(2,3)--(2,2)--(1,2)--(1,1)--(0,1)--cycle;
        \draw (0,0) -- (4,0);
        \draw (3,4) -- (7,4);
        \foreach \x in {0,...,2}{
          \draw (\x,\x+1) -- (\x+5,\x+1);
        }
        \foreach \x in {0,...,3}{
          \draw (\x,0) -- (\x,\x+1);
          \draw (7-\x,4) -- (7-\x,3-\x);
        }  
      \end{scope} 

      \begin{scope}[shift={(9.5,0)},xscale=1.25,yscale=0.75,rotate=21] 
        \path[fill=gray1] (0,0)--(4,0)--(4,1)--(5,1)--(5,2)--(6,2)--(6,3)--(7,3)--(7,4)--(3,4)--(3,3)--(2,3)--(2,2)--(1,2)--(1,1)--(0,1)--cycle;
        \draw (0,0) -- (4,0);
        \draw (3,4) -- (7,4);
        \foreach \x in {0,...,2}{
          \draw (\x,\x+1) -- (\x+5,\x+1);
        }
        \foreach \x in {0,...,3}{
          \draw (\x,0) -- (\x,\x+1);
          \draw (7-\x,4) -- (7-\x,3-\x);
        }  
      \end{scope} 

    \end{scope}

      \node at (l1){\large Reference config.};
      \node at (l2){\large Current config.};
      \node at (l3){\large Intermediate config.};
      \node at (fe){\Large $\FF^\e$};
      \node at (fp){\Large $\FF^\p$};
      \node[above right] at (a){\large {\bf (b)} Crystal plasticity};
      \node[above] at (ff){\Large $\FF$};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \begin{scope}[scale=0.4,shift={(0,0)}]

      \coordinate (l1) at (2.3,5.3); 
      \coordinate (l2) at (13.2,5.3); 
      \coordinate (l3) at (7,-7);

      \draw[rounded corners=15pt,gray2,thick] (-2.2,6.2) coordinate(a) rectangle (17.2,-7.8);

      \draw[thick,->] plot[smooth,tension=0.9,shift={(2,-1)}] coordinates {(0,0)(0.5,-1.5)(1.5,-3)};
      \draw[thick,->] plot[smooth,tension=0.9,shift={(11,-4)}] coordinates {(0,0)(1.0,1.5)(1.5,3)};
      \coordinate (fe) at(12.9,-3);
      \coordinate (fp) at(1.6,-3);
      \draw[thick,->] (5,2) -- (9,2) coordinate[pos=0.5] (ff);

      \draw[fill=gray1] (0.5,0.5) rectangle (3.5,3.5);  
      \draw[fill=gray1,shift={(11,0)},rotate=10] (0,0) rectangle (5,3.2);  
      \draw[fill=gray1,shift={(5,-5.5)}] (0,0) rectangle (4,4);  
    \end{scope}

    \node at (l1){\large Reference config.};
    \node at (l2){\large Current config.};
    \node at (l3){\large Intermediate config.};
    \node at (fe){\Large $\FF^\e$};
    \node at (fp){\Large $\FF^\c$};
    \node[above] at (ff){\Large$\FF$};
    \node[above right] at (a){\large {\bf (a)} Isotropic chemical swelling};

  \end{tikzpicture}
\end{document} 